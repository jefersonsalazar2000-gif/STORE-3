import json, os, re

# Pre-collected ASINs and guesses from the user's links
products = [
    ("B0CZRNH2LN", "Pantalones deportivos de entrenamiento con cremallera (FIRSTGYM)", "Ropa"),
    ("B0DXZ53V7D", "Pantalones deportivos con bolsillo y cremallera (MGBOYGYM)", "Ropa"),
    ("B08FSNF4G1", "Pantalones de entrenamiento con cremallera", "Ropa"),
    ("B07DDH77KG", "Gorra trucker Grace Folly unisex", "Accesorios"),
    ("B08G15PNCW", "Gorra Grace Folly de béisbol (juvenil)", "Accesorios"),
    ("B0BBXXHW78", "Mesa de inversión para espalda", "Salud y Fitness"),
    ("B0DKPG12X1", "Echo Bundle: Echo Dot (5ª generación) (edición limitada)", "Tecnología"),
    ("B09B1S41YK", "Colgador inteligente con accesorios integrados", "Hogar"),
    ("B0FB21526X", "Logitech MX Master 3S ratón inalámbrico", "Tecnología"),
    ("B00BAGTNAQ", "ChomChom Roller removedor de pelo para mascotas", "Mascotas"),
    ("B0DQJV5D9K", "BISSELL PowerClean FurFinder inalámbrica", "Hogar"),
    ("B07S652B12", "Aspiradora inalámbrica de mano (con accesorios)", "Hogar"),
    ("B01N4Q8KO2", "Gafas de sol Carrera 5041 rectangulares Gradient", "Accesorios"),
    ("B0DFGQHX22", "NORTIV zapatos deportivos antideslizantes", "Calzado"),
    ("B0F5M4HVMV", "UOVO Flow zapatos cómodos \"Lakemoon\" cobalto", "Calzado"),
]

def slugify(text):
    text = text.lower()
    text = re.sub(r"[^a-z0-9]+", "-", text).strip("-")
    return text

items = {}
for asin, title, category in products:
    slug = f"{slugify(title)}-{asin.lower()}"
    items[slug] = {
        "TITLE": title,
        "PRICE": 0,
        "CATEGORY": category,
        "IMAGE": "",
        "AMAZON": f"https://www.amazon.com/dp/{asin}?tag=kaninosabioan-20",
        "FEATURE": False
    }

data = {"PRODUCTOS": items}

os.makedirs("/mnt/data", exist_ok=True)
out_path = "/mnt/data/productos.json"
with open(out_path, "w", encoding="utf-8") as f:
    json.dump(data, f, ensure_ascii=False, indent=2)

out_path
